build:
  gpu: true
  cuda: "12.4"
  python_version: "3.10"
  python_packages:
    - "torch==2.5.1"
    - "torchaudio==2.5.1"
    - "numpy<2.0"
    - "scipy"
    - "librosa==0.10.2"
    - "numba"
    - "pytorch-lightning>=2.4"
    - "ffmpeg-python"
    - "tqdm"
    - "cn2an"
    - "pypinyin"
    - "g2p_en"
    - "sentencepiece"
    - "transformers>=4.43,<=4.50"
    - "peft<0.18.0"
    - "chardet"
    - "PyYAML"
    - "jieba_fast"
    - "jieba"
    - "split-lang"
    - "fast_langdetect>=0.3.1"
    - "wordsegment"
    - "rotary_embedding_torch"
    - "x_transformers"
    - "torchmetrics<=1.5"
    - "pydantic<=2.10.6"
    - "opencc-python-reimplemented"
  system_packages:
    - "ffmpeg"
    - "libsndfile1"
    - "cmake"
    - "build-essential"
  run:
    - "pip install 'cmake<4' && pip install 'pyopenjtalk>=0.4.1'"
predict: "predict.py:Predictor"
